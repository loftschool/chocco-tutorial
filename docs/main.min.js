"use strict";function ownKeys(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(Object(n),!0).forEach(function(e){_defineProperty(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var myMap,openItem=function(e){var t=e.closest(".team__item"),n=t.find(".team__content"),e=n.find(".team__content-block").height();t.addClass("active"),n.height(e)},closeEveryItem=function(e){var t=e.find(".team__content");e.find(".team__item").removeClass("active"),t.height(0)};$(".team__title").click(function(e){var t=$(e.currentTarget),e=t.closest(".team");t.closest(".team__item").hasClass("active")?closeEveryItem(e):(closeEveryItem(e),openItem(t))});var init=function(){myMap=new ymaps.Map("map",{center:[59.93916998692174,30.309015096732622],zoom:11,controls:[]});for(var e=[[59.94554327989287,30.38935262114668],[59.91142323563909,30.50024587065841],[59.88693161784606,30.319658102103713],[59.97033574821672,30.315194906302924]],t=new ymaps.GeoObjectCollection({},{draggable:!1,iconLayout:"default#image",iconImageHref:"./images/icons/marker.svg",iconImageSize:[46,57],iconImageOffset:[-35,-52]}),n=0;n<e.length;n++)t.add(new ymaps.Placemark(e[n]));myMap.geoObjects.add(t),myMap.behaviors.disable("scrollZoom")};ymaps.ready(init),function(){function o(e){var t=e.find(".products-menu__item"),e=e.find(".products-menu__content");t.removeClass("active"),e.width(0)}function i(e){var t=0,n=$(window).width(),r=3*e.find(".products-menu__title").width(),a=e.find(".products-menu__container"),e=parseInt(a.css("padding-left")),a=parseInt(a.css("padding-right"));return{container:t=window.matchMedia("(max-width: 768px)").matches?n-r:500,textContainer:t-e-a}}$(".products-menu__title").click(function(e){e.preventDefault();var t=$(e.currentTarget),n=t.closest(".products-menu__item"),r=n.hasClass("active"),a=t.closest(".products-menu");r?o(a):(o(a),t=(e=n).find(".products-menu__content"),r=i(e).container,a=e.find(".products-menu__container"),n=i(e).textContainer,e.addClass("active"),t.width(r),a.width(n))}),$(".products-menu__close").click(function(e){e.preventDefault(),o($(".products-menu"))})}();var hamburger=document.querySelector(".hamburger"),menu=document.querySelector(".fullscreen-menu"),closeBtn=menu.querySelector(".fullscreen-menu__close");hamburger.addEventListener("click",function(e){e.preventDefault(),menu.classList.add("active")}),closeBtn.addEventListener("click",function(e){e.preventDefault(),menu.classList.remove("active")});var validateFields=function(e,t){return t.forEach(function(e){e.removeClass("input-error"),""===e.val().trim()&&e.addClass("input-error")}),0===e.find(".input-error").length};$(".form").submit(function(e){e.preventDefault();var t=$(e.currentTarget),n=t.find("[name='name']"),r=t.find("[name='phone']"),a=t.find("[name='comment']"),e=t.find("[name='to']"),o=$("#modal"),i=o.find(".modal__content");o.removeClass("error-modal"),validateFields(t,[n,r,a,e])&&((e=$.ajax({url:"https://webdev-api.loftschool.com/sendmail",method:"post",data:{name:n.val(),phone:r.val(),comment:a.val(),to:e.val()},error:function(){}})).done(function(e){i.text(e.message)}),e.fail(function(e){e=e.responseJSON.message;i.text(e),o.addClass("error-modal")}),e.always(function(){$.fancybox.open({src:"#modal",type:"inline"})}))}),$(".app-submit-btn").click(function(e){e.preventDefault();var t=$("form"),n=t.find("[name='name']"),e=t.find("[name='phone']");t.find("[name='comment']").val(""),n.val(""),e.val(""),$.fancybox.close()});var sections=$("section"),display=$(".maincontent"),sideMenu=$(".fixed-menu"),menuItems=sideMenu.find(".fixed-menu__item"),mobileDetect=new MobileDetect(window.navigator.userAgent),isMobile=mobileDetect.mobile(),inScroll=!1;sections.first().addClass("active");var player,countSectionPosition=function(e){e*=-100;return isNaN(e)?(console.error("передано не верное значение в countSectionPosition"),0):e},changeMenuThemeForSection=function(e){var t="fixed-menu--shadowed";"black"===sections.eq(e).attr("data-sidemenu-theme")?sideMenu.addClass(t):sideMenu.removeClass(t)},resetActiveClassForItem=function(e,t,n){e.eq(t).addClass(n).siblings().removeClass(n)},performTransition=function(e){var t;inScroll||(inScroll=!0,t=countSectionPosition(e),changeMenuThemeForSection(e),display.css({transform:"translateY(".concat(t,"%)")}),resetActiveClassForItem(sections,e,"active"),resetActiveClassForItem(menuItems,e,"fixed-menu__item--active"),setTimeout(function(){inScroll=!1},1300))},viewportScroller=function(){var e=sections.filter(".active"),t=e.next(),n=e.prev();return{next:function(){t.length&&performTransition(t.index())},prev:function(){n.length&&performTransition(n.index())}}};$(window).on("wheel",function(e){var t=e.originalEvent.deltaY,e=viewportScroller();0<t&&e.next(),t<0&&e.prev()}),$(window).on("keydown",function(e){var t=e.target.tagName.toLowerCase(),n="input"===t||"textarea"===t,t=viewportScroller();if(!n)switch(e.keyCode){case 38:t.prev();break;case 40:t.next()}}),$(".wrapper").on("touchmove",function(e){return e.preventDefault()}),$("[data-scroll-to]").click(function(e){e.preventDefault();e=$(e.currentTarget).attr("data-scroll-to"),e=$("[data-section-id=".concat(e,"]"));performTransition(e.index())}),isMobile&&$("body").swipe({swipe:function(e,t){viewportScroller()["down"===t?"prev":"up"===t?"next":""]()}});var formatTime=function(e){var t=Math.round(e),e=Math.floor(t/60),t=t-60*e,t=t<10?"0".concat(t):t;return"".concat(e,":").concat(t)},onPlayerReady=function(){var e,n=player.getDuration();$(".player__duration-estimate").text(formatTime(n)),void 0!==e&&clearInterval(e),e=setInterval(function(){var e=player.getCurrentTime(),t=e/n*100;$(".player__playback-button").css({left:"".concat(t,"%")}),$(".player__duration-completed").text(formatTime(e))},1e3)},eventsInit=function(){$(".player__start").on("click",function(e){e.preventDefault(),$(e.currentTarget).hasClass("paused")?player.pauseVideo():player.playVideo()}),$(".player__playback").on("click",function(e){var t=$(e.currentTarget),e=(e.pageX-t.offset().left)/t.width()*100,t=player.getDuration()/100*e;$(".player__playback-button").css({left:"".concat(e,"%")}),player.seekTo(t)}),$(".player__splash").on("click",function(e){player.playVideo()})},onPlayerStateChange=function(e){var t=$(".player__start");switch(e.data){case 1:$(".player__wrapper").addClass("active"),t.addClass("paused");break;case 2:t.removeClass("paused")}},dimensions={width:"660",height:"405"};function onYouTubeIframeAPIReady(){player=new YT.Player("yt-player",_objectSpread(_objectSpread({},dimensions),{},{videoId:"7AkbUfZjS5k",events:{onReady:onPlayerReady,onStateChange:onPlayerStateChange},playerVars:{controls:0,disablekb:0,showinfo:0,rel:0,autoplay:0,modestbranding:0}}))}window.innerWidth<600&&(dimensions={width:"660",height:"300"}),eventsInit();var slider=$(".products").bxSlider({pager:!1,controls:!1});$(".product-slider__arrow--direction--prev").click(function(e){e.preventDefault(),slider.goToPrevSlide()}),$(".product-slider__arrow--direction--next").click(function(e){e.preventDefault(),slider.goToNextSlide()});var findBlockByAlias=function(n){return $(".reviews__item").filter(function(e,t){return $(t).attr("data-linked-with")===n})};$(".reviews-switcher__item").click(function(e){e.preventDefault();var t=$(e.currentTarget),e=t.find(".reviews-switcher__link").attr("data-open"),e=findBlockByAlias(e),t=t.closest(".reviews-switcher__item");e.addClass("active").siblings().removeClass("active"),t.addClass("active").siblings().removeClass("active")});